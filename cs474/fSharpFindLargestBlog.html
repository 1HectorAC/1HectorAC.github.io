<!DOCTYPE html>
<html lang="en">

<head>
    <meta cahrset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
        integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <link rel="stylesheet" href="../css/default.css">
    <title>CS474 FSharpFindLargest Blog</title>
</head>

<body>
    <div class="title text-center">
        <h1><a href="../index.html">Programming Portfolio</a></h1>
        <h6><i>By Hector Acosta-Cervantes</i></h6>
    </div>
    <div class="blackBar">
        <a href="../index.html">Home</a> >
        <a href="../cs474LandingPage.html">CS 474 (Concurrent Systems)</a> >
        F# Find Largest Blog (F#) Blog
    </div>
    <div class="container text-center">
        <div class="whitePanel">
            <h2>F# Find Largest Blog (F#)</h2>
        </div>
    </div>

    <div class="container">
        <div class="row">
            <div class="col-md-6">
                <div class="blackPanel">
                    <h4>Summary</h4>
                    <hr class="whiteLine" />
                    <p class="paragraphText">
                        This a F# console app that runs 2 versions of finding the largest number in an array. There is a
                        sequential and parallel version. It will run the algorithms with different array sizes and
                        prints the
                        time it takes to run. I will mostly talk about the F# programming language features involved in
                        solving
                        this problem and some of the differences compared to C#. Link to the git hub
                        repositiory section <a
                            href="https://github.com/1HectorAC/CS474/tree/master/CS474FSharpFindLargest">here.</a>
                    </p>
                </div>
            </div>
            <div class="col-md-6">
                <div class="blackPanel">
                    <h4>Goal</h4>
                    <hr class="whiteLine" />
                    <p class="paragraphText">The goals was to get more familiar with F# and do some data parallelism
                        too.
                    </p>
                </div>
                <div class="blackPanel">
                    <h4>Tools</h4>
                    <hr class="whiteLine" />
                    <p class="paragraphText">I used the programming language F# and the IDE Visual Studio.
                    </p>
                </div>
            </div>
        </div>
        <div class="blackPanelWithMorePadding">
            <h4>1. Get Largest function</h4>
            <hr class="whiteLine" />
            <p class="paragraphText">The fist part I made was just a simple function to find the largest number between
                two numbers in an
                array. Here are a couple differences I noticed compared to C#.</p>
            <ol class="text-start">
                <li>Types are inferred (use "let")</li>
                <li>Function parameters formatted as "name : type"</li>
            </ol>
            <pre class="codeBlockPanel"><code>
let GetLargestBetweenTwoInArray (one,two: int, f: array&lt;_&gt;) = if f.[one] &gt; f.[two] then one else two
            </code></pre>
            <br /><br />
            <h4>2. Sequential Version</h4>
            <hr class="whiteLine" />
            <p class="paragraphText">This is the function to find the largest number in an array sequentially. Here more
                differences to C#:
            </p>
            <ol class="text-start">
                <li>Variables are immutable by default and must be set to "mutable" otherwise</li>
                <li>Easily make number range with ".." EX: 1..10 will be integers 1 though 10</li>
                <li>To assign mutable variable a new value we must use arrow. EX: var &lt;- newValue</li>
                <li>To return a value in a function we need to end with that value</li>
            </ol>
            <pre class="codeBlockPanel"><code>
let SequentialLargestAlgorithm (arr:array&lt;_&gt;) =
    let mutable maxIndex = 0
    for i in 1.. arr.Length-1 do (maxIndex &lt;- GetLargestBetweenTwoInArray(maxIndex, i,arr))
    arr[maxIndex]
            </code></pre>
            <br /><br />
            <h4>3. Parallel Version</h4>
            <hr class="whiteLine" />
            <p class="paragraphText">This is the function to find the largest number in an array parallelly. There isn't
                much to note that
                hasnâ€™t already been said compared to C#. I will add that the Parrallel.For loop will try to return
                something so I added a "|> ignore" at the end to deal with that.</p>
            <pre class="codeBlockPanel"><code>
let ParallelLargestAlgorithm (arr:array&lt;_&gt;, chunk: int) = 
    let mutable maxIndex =  0;
    let monitor = new Object()
    Parallel.For(0, arr.Length / chunk, fun i -&gt;
        let start1 = i * chunk
        let end1 = (i + 1) * chunk
        let mutable localMax = start1
        for i in start1.. (end1 - 1) do (localMax &lt;- GetLargestBetweenTwoInArray(i,localMax,arr))
        lock (monitor) (fun () -&gt; maxIndex &lt;- GetLargestBetweenTwoInArray(localMax, maxIndex,arr))
            ) |&gt; ignore
    arr[maxIndex]
            </code></pre>
            <br /><br />
            <h4>4. Results</h4>
            <hr class="whiteLine" />
            <p class="paragraphText">The results involve running the sequential and parallel version with various array
                sizes and recoding
                the times. Note that "chunk" is just size/processors. Console results:</p>
            <div class="row">
                <div class="col-md-6 offset-md-3">
                    <img class="formatedImage" src="images/CS474FSharpFindLargestResult.png" alt="">
                </div>
            </div>
        </div>
    </div>
</body>

</html>