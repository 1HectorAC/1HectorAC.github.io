<!DOCTYPE html>
<html lang = "en">
    <head>
        <meta cahrset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">    
        <link rel = "stylesheet" href = "css/default.css">
        <title> HW 6 Blog</title>
    </head>
    <body>
       <div class="container title">  
           <h1> Homework 6</h1>
       </div>
        <div class="container">  
            <h4>Assignment Summary:</h4>
            <p>Assignment Summary: The main objective is make a MVC web application using a pre-existing database. We will use as Code First with an Existing Database workflow. The program will involve looking up information about a person from a database from a search of their name. The full details of the assignment can be found here: <a href="http://www.wou.edu/~morses/classes/cs46x/assignments/HW6_1819.html">http://www.wou.edu/~morses/classes/cs46x/assignments/HW6_1819.html</a> </p>
            <hr>
            <h4>Step 1 (Setup):</h4>
            <p>The first thing I needed to do was to download microsoft sql server management studio and sql express. I use them to restore the database that the assignment page has a link to download, which we will use for this assignment. Then I used Nuget to add microsoft.SqlServer.Types and entity framework. I also downloaded LinqPad5. Then I proceeded to restore the database.</p>
            <hr>
            <h4>Step 2 (Linq Query):</h4>
            <p>I then began messing around with linq query searches with LinqPad5 before writing any code. Somethings that I really took note of is to notice when a search will give you a single object of something or a list of them and making sure the next command adheres to that. I eventually just looked up every query I was sure to use in the assignment. I will not show them here since they will just be shown in the code in later parts of the blog.</p>
            <hr>
            <h4>Step 3 (Search Name):</h4>
            <p>This part is just how the name was being searched.</p>
            <h5 class="subT">HomeController.cs:</h5>
            <p>So I need the logic to to take in a searched name and then returned at least a list of names to display to the index view. I pretty much just looked through the SearchName of the Person table in the database and matched any that fit and then passed that list of people to the index view. </p>
            <img src="" alt="">
            <hr>
            <h4>Step 4 (Display Information):</h4>
            <p>To display information on the searched person I used POST and passed an id number. The page has access to the person ID number since I passed in a list of people in the previous part.</p>
            <h5 class="subT">Index.cshtml:</h5>
            <p>So this page pretty much just has the form setup. Not much else to it.</p>
            <img src="" alt="">
            <p>So before I get into the HomeController logic of calling a view with a model contain all the information need to display I needed to make a View Model. </p>
            <h5 class="subT">PersonDashboardVM.cs:</h5>
            <p>This View model just holds all the variables I will need to display so it won't be necessary to show the code. This is needed since I will need information from multiple models and you can only pass one model to the view. Note that I also made another View Model containing purchase Information for a profitable purchased Item. I needed a list of these in the PersonDashboardVM since I need to store 10 of them.</p>
            <img src="" alt="">
            <h5 class="subT">HomeController.cs:</h5>
            <p>So the Detail Action to get the Detail view is where most of the query searches and logic is. It is a Post and takes in an ID. So we Initialize the a PersonDashboardVM object to store all the information. We always store the personal information so that was done entered in first.</p>
            <img src="" alt="">
            <p>The second half of the assignment has a few checks to see if it requires more information to be stored. Specifically I checked If certain IDs matched and whether custormer2 was null.</p>
            <img src="" alt="">
            <p>A notable part was setting up the top 10 profitable items list. I pretty much made a query search to set up a list of the top 10 most profitable items and then looped though it to put them In my model. I feel like this part could have been more efficient but it works.</p>
            <img src="" alt="">
            <h5 class="subT">Detail.cshtml:</h5>
            <p>This part just displays all the parts of the PersonDashboardMV model that It needs to show using razor html and lambda functions. One thing to note is that I use one “if” check so see if the companyName variable in the model is null, this is because to display the second half I need to know if the second half was filled in so checking just the company name should be fine is assuming the second half was in fact filled in.</p>
            <hr>
            <h4>Step 5 (Result):</h4>
            <p>Test result video (Note that  It has no sound):</p>  
            

            <hr>
        </div>
    </body>
</html>